'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _color = require('color');

var _color2 = _interopRequireDefault(_color);

var _keywords = require('./keywords.json');

var _keywords2 = _interopRequireDefault(_keywords);

var _toShorthand = require('./lib/toShorthand');

var _toShorthand2 = _interopRequireDefault(_toShorthand);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var shorter = function shorter(a, b) {
    return (a && a.length < b.length ? a : b).toLowerCase();
};

exports.default = function (colour) {
    var legacy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

    try {
        var parsed = (0, _color2.default)(colour.toLowerCase());
        var alpha = parsed.alpha();
        if (alpha === 1) {
            var toHex = (0, _toShorthand2.default)(parsed.hex().toLowerCase());
            return shorter(_keywords2.default[toHex], toHex);
        } else {
            var rgb = parsed.rgb();
            if (!legacy && !rgb.color[0] && !rgb.color[1] && !rgb.color[2] && !alpha) {
                return 'transparent';
            }
            var hsla = parsed.hsl().round().string();
            var rgba = rgb.string();
            return hsla.length < rgba.length ? hsla : rgba;
        }
    } catch (e) {
        // Possibly malformed, so pass through
        return colour;
    }
};