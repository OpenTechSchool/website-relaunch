'use strict';

var getDescendentProcessInfo = require('ps-tree');

module.exports = killPosix;

/**
 * Kills the new process and its sub processes.
 * @this ChildProcess
 * @returns {void}
 */
function killPosix() {
  getDescendentProcessInfo(this.pid, function (err, descendent) {
    if (err) {
      return;
    }

    descendent.forEach(function (_ref) {
      var pid = _ref.PID;

      try {
        process.kill(pid);
      } catch (_err) {
        // ignore.
      }
    });
  });
}